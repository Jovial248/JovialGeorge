<!DOCTYPE html>
<html>

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="img/fav.png">
	<!-- Author Meta -->
	<meta name="author" content="Jovial George">
	<!-- Meta Description -->
	<meta name="description" content="Official Website of Jovial George. It have personal portfolio of Jovial. This website can be used for business and collaboration meeting purpose. It also include all the contact details for any kinds of enquiries.">
	<!-- Meta Keyword -->
	<meta name="keywords" content="Official Website of Jovial George">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Chrome Add-ons -->
	<meta name="theme-color" content="#E45447">
	<link rel="manifest" href="/manifest.json">
	<!-- Site Title -->
	<title>Jovial George</title>

	<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700,900" rel="stylesheet">
	<!-- CSS
    ============================================= -->
	<link rel="stylesheet" href="css/linearicons.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/animate.min.css">
	<link rel="stylesheet" href="css/owl.carousel.css">
	<link rel="stylesheet" href="css/main.css">

	<!-- Extras -->
	<link rel="stylesheet" href="css/extras.css">
</head>

<body onload="checkGET()">

	<!-- Start Preloader Area -->
	<div class="preloader-area">
		<div class="loader-box">
			<div class="loader"></div>
		</div>
	</div>
	<!-- End Preloader Area -->


	<!-- Start Header Area -->
	<header id="header">
		<div class="container main-menu">
			<div class="row align-items-center d-flex">
				<div id="logo">
					<a href="index.html"><img src="img/logo.png" height="49" width="49" alt="" title="" /></a>
				</div>
				<nav id="nav-menu-container">
					<ul class="nav-menu">
						<li class=""><a class="active" href="index.html#home">Home</a></li>
						<li><a href="index.html#about">About</a></li>
						<li><a href="index.html#work">Portfolio</a></li>
						<li><a href="index.html#service">Service</a></li>
						<li><a href="index.html#contact">Contact</a></li>
						<!--
						<li class="menu-has-children"><a href="#">Pages</a>
							<ul>
								<li><a href="elements.html">Elements</a></li>
								<li><a href="contact.html">Contact</a></li>
								<li><a href="services.html">Service</a></li>
								<li><a href="portfolio-details.html">Portfolio Details</a></li>
							</ul>
						</li>
						<li class="menu-has-children"><a href="">Blog</a>
							<ul>
								<li><a href="blog-home.html">Blog Home</a></li>
								<li><a href="blog-single.html">Blog Single</a></li>
							</ul>
						</li>
				    	-->
					</ul>
				</nav>
			</div>
		</div>
	</header>
	<!-- End Header Area -->

	<!-- Start banner Area -->
	<section class="banner-area relative">
		<div class="container">
			<div class="row d-flex align-items-center justify-content-center">
				<div class="about-content col-lg-12">
					<h1 class="text-white">
						Data Centre
					</h1>
					<p class="link-nav">
						<span class="box">
							<a href="">Refresh </a>
							<a href="" onclick="window.close()">Close</a>
						</span>
					</p>
				</div>
			</div>
		</div>
	</section>
	<!-- End banner Area -->

	<!-- Start Data Area -->
	<div class="section-top-border container">
				<h3 class="mb-30">Messages</h3>
				<div class="progress-table-wrap">
					<div id="p-table" class="progress-table">
						<div class="table-head">
							<div class="serial country">Time</div>
							<div class="country">Name</div>
							<div class="percentage">Email</div>
							<div class="visit">Subject</div>
							<div class="percentage">Message</div>
						</div>
						<!-- Sample Row Template
						<div class="table-row">
							<div class="serial visit">01-01-2020 1:00</div>
							<div class="country">Angel</div>
							<div class="country">a@a.com</div>
							<div class="visit">Deal</div>
							<div class="percentage">1 Billion Dollar Deal</div>
						</div>
						-->
					</div>
				</div>
			</div>
	<!-- End Data Area -->

	<!-- start footer Area -->
	<footer class="footer-area">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-12">
					<div class="footer-top flex-column">
						<div class="footer-logo">
							<img src="img/fav.png" alt="">
							<h4>Follow Me</h4>
						</div>
						<div class="footer-social">
							<a href="https://www.facebook.com/Jovial.George.008" target="_blank"><i class="fa fa-facebook"></i></a>
							<a href="https://www.instagram.com/jovialgeorge_/" target="_blank"><i class="fa fa-instagram"></i></a>
							<a href="https://twitter.com/Jovial_George" target="_blank"><i class="fa fa-twitter"></i></a>
							<a href="https://github.com/Jovial248" target="_blank"><i class="fa fa-github"></i></a>
							<a href="https://www.linkedin.com/in/jovial-george/" target="_blank"><i class="fa fa-linkedin"></i></a>
						</div>
					</div>
				</div>
			</div>
			<div class="row footer-bottom justify-content-center">
				<p class="col-lg-8 col-sm-12 footer-text">
					Made by <a href="https://github.com/Jovial248" target="_blank">Jovial George</a>
				</p>
			</div>
		</div>
	</footer>
	<!-- End footer Area -->

	<!-- Start Login Modal -->
	<div id="loginModal" class="modal fade">
    	<div class="modal-dialog modal-dialog-centered text-center">
    	    <div class="modal-content">
    	        <div class="modal-header">
    	            <h4 class="modal-title">Admin Login</h4>
    	        </div>
            	<div class="modal-body">
					<p>*Please note this is not for the website visitor*</p>
            	    <form action="" method="GET" onsubmit="verifyAuth()">
            	    	<div class="justify-center">
            	    		<div class="form-group">
            	            	<input id="username" name="username" type="text" class="form-control" placeholder="Username">
            	        	</div>
            	        	<div class="form-group">
            	        	    <input id="password" name="password" type="password" class="form-control" placeholder="Password">
            	        	</div>
            	        	<p class="auth-msg"></p>
            	        	<button type="submit" class="btn btn-primary float-right">Login</button>
            	    	</div>
            	    </form>
            	</div>
        	</div>
    	</div>
	</div>
	<!-- End Login Modal -->

	<!-- ####################### Start Scroll to Top Area ####################### -->
    <button onclick="topFunction()" id="myBtn" title="Go to top" class="genric-btn info circle">
    	<i class="lnr lnr-arrow-up"></i>
    </button>

    <div id="snackbar">Message Sent</div>

	<!-- ####################### End Scroll to Top Area ####################### -->

	<script src="js/vendor/jquery-2.2.4.min.js"></script>
	<script src="js/vendor/bootstrap.min.js"></script>
	<script src="js/hoverIntent.js"></script>
	<script src="js/superfish.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/isotope.pkgd.min.js"></script>
	<script src="js/wow.min.js"></script>
	<script src="js/main.js"></script>
	
	<!-- Extras -->
	<script src="js/extras.js"></script>
	
	<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  	<script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-app.js"></script>
  	<!-- Firebase realtime database SDK -->
  	<script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-database.js"></script>
  	<script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-auth.js"></script>
  	<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  	<script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-analytics.js"></script>
  	<!-- Firebase Config Setup -->
	<script>
	  // Your web app's Firebase configuration
	  var firebaseConfig = {
	    apiKey: "api-key",
  		authDomain: "project-id.firebaseapp.com",
  		databaseURL: "https://project-id.firebaseio.com",
  		projectId: "project-id",
  		storageBucket: "project-id.appspot.com",
  		messagingSenderId: "sender-id",
  		appId: "app-id",
  		measurementId: "G-measurement-id"
	  };
	  
	  // Initialize Firebase
	  firebase.initializeApp(firebaseConfig);

	  // Get a reference to the database service
  	  var database = firebase.database();
  	  var provider = new firebase.auth.GoogleAuthProvider();

  	  // Function to get current date & time
  	  function currentdat() {
  	  	var currentdate = new Date(); 
		var datetime = currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/" 
                + currentdate.getFullYear() + " "  
                + currentdate.getHours() + ":"  
                + currentdate.getMinutes() + ":" 
                + currentdate.getSeconds();
        return datetime;
  	  }

  	  // Function to show a toast message
  	  function toast(msg) {
	    var x = document.getElementById("snackbar");
	    x.className = "show";
	    x.innerHTML = msg;
	    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
	  }

	  // Function to shorten the message text body
	  function shorten() {

	  }

  	  // Function to write data to firebase database
  	  function writeUserData() {
  	  	var name = document.getElementById("name").value,
  	  		timestamp = currentdat(),
  	  	    timestamp_parsed = timestamp.replace(/\//g, "-");
  	  	firebase.database().ref('messages/' + timestamp_parsed + " @ " + name).set({
  		  name: name,
  		  email: document.getElementById("email").value,
  		  subject: document.getElementById("subject").value,
  		  message: document.getElementById("message").value,
  		  timestamp : timestamp
  		});
  	  }

  	  // Function to count no. of child nodes in database
  	  function countChild() {
  	  	var ref = firebase.database().ref("messages");
		ref.once("value")
		  .then(function(snapshot) {
		    var c = snapshot.numChildren();
		    console.log("Count: " + c);
		    return c;
 		});
  	  }

  	  // Function to add row child to table
  	  function addRow(n1, timestamp, name, email, sub, msg) {
  	  	var row = document.createElement('div');
  		row.id = 'r'+ n1;
  		row.className = 'table-row';
		document.getElementById("p-table").appendChild(row);

  		var rtime = document.createElement('div');
  		rtime.className = 'serial country';
  		rtime.innerHTML = timestamp;
  		document.getElementById(row.id).appendChild(rtime);

  		var rname = document.createElement('div');
  		rname.className = 'country';
  		rname.innerHTML = name;
  		document.getElementById(row.id).appendChild(rname);

  		var remail = document.createElement('div');
  		remail.className = 'percentage';
  		remail.innerHTML = email;
  		document.getElementById(row.id).appendChild(remail);

  		var rsub = document.createElement('div');
  		rsub.className = 'visit';
  		rsub.innerHTML = sub;
  		document.getElementById(row.id).appendChild(rsub);

  		var rmsg = document.createElement('div');
  		rmsg.className = 'percentage';
  		rmsg.innerHTML = msg;
  		document.getElementById(row.id).appendChild(rmsg);
  	  }

  	  // Function to read no. of child nodes in database
  	  function readChild() {
  	  	var i = 1;
  	  	var query = firebase.database().ref("messages");
		query.on("value", function(snapshot) {
		    snapshot.forEach(function(childSnapshot) {
		      var key = childSnapshot.key;
		      var childData = childSnapshot.val();
		      addRow(i, childData.timestamp, childData.name, childData.email, childData.subject, childData.message);
		      ++i;
		      console.log(i);
		      console.log(childData.timestamp);
		      console.log(childData);
		  	});
		});
  	  }
  	  
  	  // Function to verify authentification
  	  function verifyAuth(username, password) {
  	  	var query = firebase.database().ref("users");
		query.on("value", function(snapshot) {
		    snapshot.forEach(function(childSnapshot) {
		      var key = childSnapshot.key;
		      var childData = childSnapshot.val();
		      if( childData.username == username && childData.password == password ) {
		      	toast("Signed In");
		      	$("#loginModal").modal('hide');
		      	readChild();
		      }
		      else {
		      	toast("Incorrect username or password!");
		      }
		  	});
		});
  	  }

  	  /* Function to check whether toast should be displayed or not
  	  function checkMsg() {
  	  	var urlParams = new URLSearchParams(window.location.search);
  		var val = urlParams.get('alert');
  		if( val == 1 ){
  		  toast();
  		}
  		readChild();
  	  }*/

  	  // Function to check whether GET parameters are passed
  	  function checkGET() {
  	  	var urlParams = new URLSearchParams(window.location.search);
  		var username = urlParams.get('username');
  		var password = urlParams.get('password');
  		console.log(username+" "+password);
  		verifyAuth(username, password);
  	  }
	</script>
	
	<script>
		/*$(document).ready(function(){
			$("#loginModal").modal('show');
		});*/
	</script>

</body>

</html>